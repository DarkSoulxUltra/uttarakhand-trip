<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uttarakhand Group Trip Planner</title>

<style>
body{margin:0;font-family:system-ui;background:#020617;color:#67e8f9}
h1{text-align:center;margin:8px 0}
.container{max-width:1200px;margin:auto;padding:12px}
.layout{display:flex;flex-wrap:wrap;gap:12px}
.timeline{flex:1;min-width:210px}
.card{border:1px solid #164e63;border-radius:10px;padding:8px;margin-bottom:6px;cursor:pointer}
.card.active{background:#022c22;border-color:#22d3ee}
.content{flex:3;min-width:280px}
.hero{width:100%;height:230px;object-fit:cover;border-radius:10px;border:1px solid #164e63}
.gallery{display:flex;gap:6px;overflow-x:auto}
.gallery img{height:60px;border-radius:8px;border:1px solid #164e63;cursor:pointer}
.meter{height:8px;background:#164e63;border-radius:8px}
.meter span{display:block;height:100%;background:#22d3ee}
.btn{background:#22d3ee;color:black;border:none;padding:8px 14px;border-radius:8px;font-weight:600;cursor:pointer;margin:4px}
input{padding:6px;border-radius:6px;border:none}
.section{border:1px solid #164e63;border-radius:10px;padding:10px;margin:10px 0}

/* ROUTE MAP */
canvas{width:100%;height:220px;border:1px solid #164e63;border-radius:12px;margin-bottom:10px}

/* ROUTE PANEL */
.routeBox{border:1px solid #164e63;border-radius:14px;padding:12px;margin-bottom:10px}
.progressText{text-align:center;color:#22d3ee;font-weight:600;margin-bottom:4px}
</style>
</head>

<body>

<div class="container">

<h1>Uttarakhand Group Trip Planner</h1>

<canvas id="map"></canvas>

<div class="routeBox">
  <div class="progressText" id="progressText"></div>
  <button class="btn" onclick="autoPlay()">‚ñ∂ Auto Play</button>
  <button class="btn" onclick="stopPlay()">‚è∏ Stop</button>
  <div id="distanceInfo" style="margin-top:6px"></div>
</div>

<div class="layout">
  <div class="timeline" id="timeline"></div>
  <div class="content" id="content"></div>
</div>

<div class="section">
<h3>üö® Emergency Contacts</h3>
<ul>
<li>Police: 112</li>
<li>Ambulance: 108</li>
<li>Local Taxi: Add Driver No.</li>
<li>Hotel Reception: Add No.</li>
</ul>
</div>

<div class="section">
<h3>üë• Participants</h3>
<input id="name" placeholder="Name">
<button class="btn" onclick="addPerson()">Add</button>
<ul id="people"></ul>
</div>

<div class="section">
<h3>üí∏ Expense Split</h3>
Total Extra Expense ‚Çπ <input id="totalExtra" type="number">
<button class="btn" onclick="split()">Split</button>
<p id="splitResult"></p>
</div>

</div>

<script>
/* ===== DATA ===== */
const days=[
{city:"Delhi",title:"Night Bus",dist:"‚Äî",crowd:20,
hotel:0,travel:800,food:500,entryFee:0,
images:["images/delhi_bus.jpg"]},

{city:"Haridwar",title:"Ganga Aarti",dist:"220 km",crowd:85,
hotel:900,travel:300,food:600,entryFee:200,
images:["images/haridwar_aarti.jpg"]},

{city:"Rishikesh + FRI",title:"Shiva + Garden",dist:"75 km",crowd:60,
hotel:1000,travel:500,food:700,entryFee:100,
images:["images/rishikesh_shiva.jpg","images/fri_dehradun.jpg"]},

{city:"Robber‚Äôs Cave ‚Üí Mussoorie",title:"Caves + Gardens",dist:"40 km",crowd:70,
hotel:1200,travel:600,food:700,entryFee:150,
images:["images/robbers_cave.jpg","images/company_garden.jpg"]},

{city:"Mussoorie",title:"Falls + Camel Road",dist:"Local",crowd:90,
hotel:1200,travel:300,food:800,entryFee:200,
images:["images/kempty_falls.jpg","images/camels_back.jpg"]}
];

let active=0,img=0,playInt=null;

/* ===== SAVE LOAD ===== */
let people=JSON.parse(localStorage.getItem("people")||"[]");

/* ===== TIMELINE ===== */
const timeline=document.getElementById("timeline");
const content=document.getElementById("content");

function buildTimeline(){
 timeline.innerHTML="";
 days.forEach((d,i)=>{
  let div=document.createElement("div");
  div.className="card"+(i===active?" active":"");
  div.innerHTML=`<b>${d.city}</b><br>${d.title}`;
  div.onclick=()=>select(i);
  timeline.appendChild(div);
 });
}

/* ===== MAP ===== */
const map=document.getElementById("map");
const ctx=map.getContext("2d");

function drawMap(){
 map.width=map.offsetWidth;
 map.height=map.offsetHeight;
 const pts=[50,200,380,560,720];

 ctx.clearRect(0,0,map.width,map.height);
 ctx.strokeStyle="#22d3ee";ctx.lineWidth=3;
 ctx.beginPath();
 ctx.moveTo(pts[0],110);
 for(let i=1;i<=active;i++) ctx.lineTo(pts[i],110);
 ctx.stroke();

 pts.forEach((x,i)=>{
  ctx.fillStyle=i<=active?"#22d3ee":"#164e63";
  ctx.beginPath();ctx.arc(x,110,8,0,Math.PI*2);ctx.fill();
 });
}
window.onresize=drawMap;

/* ===== RENDER ===== */
function render(){
 const d=days[active];
 const dayTotal=d.hotel+d.travel+d.food+d.entryFee;
 const tripTotal=days.reduce((a,b)=>a+b.hotel+b.travel+b.food+b.entryFee,0);

 content.innerHTML=`
 <h2>${d.title}</h2>

 <div class="meter"><span style="width:${d.crowd}%"></span></div>
 <small>${d.crowd}% crowd</small>

 <img class="hero" src="${d.images[img]}">
 <div class="gallery">${d.images.map((x,i)=>`<img src="${x}" onclick="img=${i};render()">`).join("")}</div>

 <h3>üí∞ Budget Breakdown</h3>
 Hotel: ‚Çπ${d.hotel}<br>
 Travel: ‚Çπ${d.travel}<br>
 Food: ‚Çπ${d.food}<br>
 Entry Fees: ‚Çπ${d.entryFee}<br>
 <b>Day Total: ‚Çπ${dayTotal}</b><br><br>
 <b>Trip Total: ‚Çπ${tripTotal}</b>
 `;

 document.getElementById("progressText").innerText=
  `Day ${active+1} of ${days.length} ‚Äî ${d.city}`;

 document.getElementById("distanceInfo").innerText=
  active>0?`Distance from previous stop: ${d.dist}`:"Start of trip";

 buildTimeline();
 drawMap();
}

/* ===== CONTROLS ===== */
function select(i){active=i;img=0;render();}

function autoPlay(){
 stopPlay();
 playInt=setInterval(()=>{
  active=(active+1)%days.length;
  img=0;render();
 },4000);
}
function stopPlay(){if(playInt) clearInterval(playInt);}

/* ===== PARTICIPANTS ===== */
function addPerson(){
 const n=document.getElementById("name").value;
 if(!n) return;
 people.push(n);
 localStorage.setItem("people",JSON.stringify(people));
 renderPeople();
}
function renderPeople(){
 document.getElementById("people").innerHTML=people.map(p=>`<li>${p}</li>`).join("");
}

/* ===== SPLIT ===== */
function split(){
 const extra=document.getElementById("totalExtra").value||0;
 const tripTotal=days.reduce((a,b)=>a+b.hotel+b.travel+b.food+b.entryFee,0)+Number(extra);
 if(people.length===0) return;
 const per=(tripTotal/people.length).toFixed(0);
 document.getElementById("splitResult").innerText=`Each pays: ‚Çπ${per}`;
}

/* ===== INIT ===== */
renderPeople();
render();
</script>
</body>
</html>
