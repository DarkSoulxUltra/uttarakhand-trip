<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uttarakhand Group Trip Planner</title>

<style>
body{margin:0;font-family:system-ui;background:#020617;color:#67e8f9}
h1{text-align:center;margin:8px 0}
.container{max-width:1200px;margin:auto;padding:12px;padding-bottom:170px}
.stickyTop{position:sticky;top:0;background:#020617;z-index:5}

/* ---------- SATELLITE NAV ---------- */
.routeBox{
  border:1px solid #164e63;border-radius:14px;padding:10px;margin-bottom:8px;
  background:url("https://i.imgur.com/Qr6QF9Z.jpg") center/cover no-repeat;
}
.routeOverlay{background:rgba(2,6,23,.8);border-radius:12px;padding:10px}

.progressText{text-align:center;color:#22d3ee;font-weight:600;margin-bottom:6px}

.routeLine{position:relative;display:flex;justify-content:space-between;align-items:center;height:42px}
.routeLine::before{content:'';position:absolute;left:0;right:0;top:50%;height:3px;background:#164e63}

.node{
 width:18px;height:18px;background:#164e63;border-radius:50%;cursor:pointer;z-index:2;
 box-shadow:0 0 0 2px #020617;
}
.node.active{background:#22d3ee;box-shadow:0 0 12px #22d3ee}

.vehicle{position:absolute;top:-24px;transition:.6s cubic-bezier(.4,0,.2,1)}

.routeLabels{display:flex;justify-content:space-between;font-size:12px;margin-top:4px;opacity:.85}

/* ---------- CANVAS ROUTE ---------- */
canvas{width:100%;height:160px;border:1px solid #164e63;border-radius:12px;margin-top:6px}

/* ---------- LAYOUT ---------- */
.layout{display:flex;flex-wrap:wrap;gap:12px}
.timeline{flex:1;min-width:220px}
.content{flex:3;min-width:280px}

.card{border:1px solid #164e63;border-radius:10px;padding:10px;margin-bottom:8px;cursor:pointer}
.card.active{background:#022c22;border-color:#22d3ee}

.imageWrap{border:1px solid #164e63;border-radius:12px;overflow:hidden;background:#020617}
.imageWrap img{width:100%;height:auto;max-height:320px;object-fit:contain}

.gallery{display:flex;gap:8px;overflow-x:auto;padding:6px 0}
.gallery img{height:60px;border-radius:8px;border:1px solid #164e63;cursor:pointer}

details{border:1px solid #164e63;border-radius:10px;padding:8px;margin:8px 0}
summary{cursor:pointer;font-weight:600}

.mobileNav{
  position:fixed;bottom:0;left:0;right:0;
  background:#020617;border-top:1px solid #164e63;
  display:flex;justify-content:space-around;padding:10px;z-index:10;
}

input,select{padding:6px;border-radius:6px;border:none;margin:4px}
button{background:#22d3ee;border:none;border-radius:6px;padding:6px 12px;font-weight:600;cursor:pointer}

iframe{width:100%;height:220px;border-radius:10px;border:1px solid #164e63;margin-top:6px}

@media(max-width:768px){
  .layout{flex-direction:column}
  .timeline{order:3}
}
</style>
</head>

<body>

<div class="container">

<h1>Uttarakhand Group Trip Planner</h1>

<div class="stickyTop">
  <div class="routeBox">
    <div class="routeOverlay">

      <div class="progressText" id="progressText"></div>

      <div class="routeLine">
        <div id="vehicle" class="vehicle">üöå</div>
        <div class="node" onclick="select(0)"></div>
        <div class="node" onclick="select(1)"></div>
        <div class="node" onclick="select(2)"></div>
        <div class="node" onclick="select(3)"></div>
        <div class="node" onclick="select(4)"></div>
        <div class="node" onclick="select(5)"></div>
      </div>

      <div class="routeLabels">
        <span>Delhi</span><span>Haridwar</span><span>Rishikesh</span><span>Dehradun</span><span>Mussoorie</span><span>Return</span>
      </div>

      <canvas id="routeMap"></canvas>

    </div>
  </div>
</div>

<div class="layout">
  <div class="timeline" id="timeline"></div>
  <div class="content" id="content"></div>
</div>

</div>

<div class="mobileNav">
  <button onclick="prev()">‚èÆ Prev</button>
  <button onclick="next()">Next ‚è≠</button>
</div>

<script>
// ================= STORAGE =================
let participants = JSON.parse(localStorage.getItem("participants")) || ["You","Spouse"];
let expenses = JSON.parse(localStorage.getItem("expenses")) || [];

// ================= DATES =================
const tripDates=[
 "Sun ‚Äì Delhi Arrival",
 "Mon ‚Äì Haridwar",
 "Tue ‚Äì Rishikesh ‚Üí Dehradun",
 "Wed ‚Äì Dehradun ‚Üí Mussoorie",
 "Thu ‚Äì Mussoorie",
 "Fri ‚Äì Return to Delhi"
];

// ================= ROUTE POINTS =================
const routePoints=[
 {x:40,y:90},{x:140,y:70},{x:230,y:60},{x:330,y:80},{x:440,y:50},{x:520,y:90}
];

// ================= ITINERARY =================
const days=[
{
city:"Delhi Arrival",
title:"Station ‚Üí Dinner ‚Üí Volvo Bus",
spots:[
 {n:"H Nizamuddin Station",m:"https://maps.google.com/?q=Hazrat+Nizamuddin+Railway+Station"},
 {n:"Kashmere Gate ISBT",m:"https://maps.google.com/?q=Kashmere+Gate+ISBT"}
],
schedule:{morning:"‚Äî",afternoon:"Train journey",evening:"Freshen + Bus"},
steps:["Arrive station","Freshen up","Dinner","Transfer to ISBT","Night Volvo"],
map:"https://www.google.com/maps?q=H+Nizamuddin+to+Kashmere+Gate+ISBT&output=embed",
images:["images/delhi_bus.jpg"]
},

{
city:"Haridwar",
title:"Mansa Devi + Ganga Aarti",
spots:[
 {n:"Mansa Devi Temple",m:"https://maps.google.com/?q=Mansa+Devi+Temple+Haridwar"},
 {n:"Har Ki Pauri",m:"https://maps.google.com/?q=Har+Ki+Pauri"}
],
schedule:{morning:"Temple",afternoon:"Rest",evening:"Aarti"},
steps:["Hotel rest","Ropeway","Lunch","Aarti","Market"],
map:"https://www.google.com/maps?q=Har+Ki+Pauri+Haridwar&output=embed",
images:["images/haridwar_aarti.jpg"]
},

{
city:"Rishikesh ‚Üí Dehradun",
title:"Shiva Statue + FRI",
spots:[
 {n:"Shiva Statue",m:"https://maps.google.com/?q=Shiva+Statue+Rishikesh"},
 {n:"Forest Research Institute",m:"https://maps.google.com/?q=Forest+Research+Institute+Dehradun"}
],
schedule:{morning:"Rishikesh",afternoon:"Drive",evening:"FRI"},
steps:["Temple","Caf√© lunch","Drive to DDN","Hotel","FRI walk"],
map:"https://www.google.com/maps?q=Haridwar+to+Rishikesh+to+Dehradun&output=embed",
images:["images/rishikesh_shiva.jpg","images/fri_dehradun.jpg"]
},

{
city:"Dehradun ‚Üí Mussoorie",
title:"Robber‚Äôs Cave + Mall Road",
spots:[
 {n:"Robber‚Äôs Cave",m:"https://maps.google.com/?q=Robbers+Cave+Dehradun"},
 {n:"Mall Road Mussoorie",m:"https://maps.google.com/?q=Mall+Road+Mussoorie"}
],
schedule:{morning:"Cave",afternoon:"Drive",evening:"Mall"},
steps:["Cave visit","Hotel freshen","Drive","Check-in","Evening stroll"],
map:"https://www.google.com/maps?q=Robbers+Cave+to+Mussoorie&output=embed",
images:["images/robbers_cave.jpg","images/company_garden.jpg"]
},

{
city:"Mussoorie",
title:"Kempty + Camel‚Äôs Back",
spots:[
 {n:"Kempty Falls",m:"https://maps.google.com/?q=Kempty+Falls"},
 {n:"Camel‚Äôs Back Road",m:"https://maps.google.com/?q=Camel+Back+Road+Mussoorie"}
],
schedule:{morning:"Kempty",afternoon:"Rest",evening:"Sunset"},
steps:["Falls","Lunch","Rest","Sunset walk"],
map:"https://www.google.com/maps?q=Kempty+Falls+Mussoorie&output=embed",
images:["images/kempty_falls.jpg","images/camels_back.jpg"]
},

{
city:"Return Journey",
title:"Mussoorie ‚Üí Dehradun ‚Üí Night Bus",
spots:[
 {n:"George Everest",m:"https://maps.google.com/?q=George+Everest+Mussoorie"},
 {n:"Pacific Mall Dehradun",m:"https://maps.google.com/?q=Pacific+Mall+Dehradun"}
],
schedule:{morning:"Checkout",afternoon:"Dehradun",evening:"Night bus"},
steps:[
"Checkout Mussoorie hotel",
"Optional George Everest view point",
"Drive to Dehradun",
"Mall & dinner",
"Night Volvo to Delhi"
],
map:"https://www.google.com/maps?q=Mussoorie+to+Dehradun+ISBT&output=embed",
images:["images/return_bus.jpg"]
}
];

let active=0,img=0;
const timeline=document.getElementById("timeline");
const content=document.getElementById("content");

// ================= ROUTE MAP =================
const canvas=document.getElementById("routeMap");
const ctx=canvas.getContext("2d");

function resizeCanvas(){
 canvas.width=canvas.offsetWidth;
 canvas.height=canvas.offsetHeight;
 drawRoute();
}

function drawRoute(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 ctx.strokeStyle="#164e63";ctx.lineWidth=3;
 ctx.beginPath();
 routePoints.forEach((p,i)=>{
  const x=p.x*canvas.width/600,y=p.y*canvas.height/120;
  if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);
 });
 ctx.stroke();

 ctx.strokeStyle="#22d3ee";ctx.beginPath();
 routePoints.forEach((p,i)=>{
  if(i>active)return;
  const x=p.x*canvas.width/600,y=p.y*canvas.height/120;
  if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);
 });
 ctx.stroke();

 routePoints.forEach((p,i)=>{
  const x=p.x*canvas.width/600,y=p.y*canvas.height/120;
  ctx.fillStyle=i===active?"#22d3ee":"#164e63";
  ctx.beginPath();ctx.arc(x,y,6,0,Math.PI*2);ctx.fill();
 });
}

// ================= RENDER =================
function buildTimeline(){
 timeline.innerHTML="";
 days.forEach((d,i)=>{
  let div=document.createElement("div");
  div.className="card"+(i===active?" active":"");
  div.innerHTML=`<b>${tripDates[i]}</b><br>${d.city}`;
  div.onclick=()=>select(i);
  timeline.appendChild(div);
 });
}

function render(){
 const d=days[active];

 content.innerHTML=`
 <h2>${d.title}</h2>

 <div class="imageWrap"><img src="${d.images[img]}"></div>
 <div class="gallery">${d.images.map((x,i)=>`<img src="${x}" onclick="img=${i};render()">`).join("")}</div>

 <details open><summary>üìÖ Schedule</summary>
 Morning: ${d.schedule.morning}<br>Afternoon: ${d.schedule.afternoon}<br>Evening: ${d.schedule.evening}
 </details>

 <details open><summary>üìç Spots (Clickable)</summary>
 <ul>${d.spots.map(s=>`<li><a href="${s.m}" target="_blank" style="color:#22d3ee">${s.n}</a></li>`).join("")}</ul>
 </details>

 <details open><summary>üß≠ Step-by-Step Route</summary><ul>${d.steps.map(x=>`<li>${x}</li>`).join("")}</ul></details>

 <details><summary>üó∫ Day Route Map</summary><iframe src="${d.map}" loading="lazy"></iframe></details>
 `;

 document.getElementById("progressText").innerText=`${tripDates[active]} ‚Äî ${d.city}`;
 document.querySelectorAll(".card").forEach((c,i)=>c.classList.toggle("active",i===active));
 document.querySelectorAll(".node").forEach((n,i)=>n.classList.toggle("active",i===active));
 document.getElementById("vehicle").style.left=`calc(${active*(100/(days.length-1))}% - 12px)`;

 buildTimeline();
 drawRoute();
}

function select(i){active=i;img=0;render();}
function next(){active=(active+1)%days.length;render();}
function prev(){active=(active-1+days.length)%days.length;render();}

window.addEventListener("resize",resizeCanvas);
resizeCanvas();render();
</script>
</body>
</html>
